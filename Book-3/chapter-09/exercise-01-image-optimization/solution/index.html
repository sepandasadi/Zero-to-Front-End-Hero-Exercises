<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Optimized Image Gallery - Solution</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>ðŸ“¸ Optimized Image Gallery</h1>
      <p>Modern formats â€¢ Responsive images â€¢ Lazy loading</p>
    </header>

    <main class="gallery">

      <!-- Image 1: Above the fold - NO lazy loading -->
      <div class="gallery-item">
        <picture>
          <!-- AVIF format with responsive sizes -->
          <source
            srcset="
              images/photo1-400.avif 400w,
              images/photo1-800.avif 800w,
              images/photo1-1200.avif 1200w
            "
            sizes="(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px"
            type="image/avif"
          >
          <!-- WebP format with responsive sizes -->
          <source
            srcset="
              images/photo1-400.webp 400w,
              images/photo1-800.webp 800w,
              images/photo1-1200.webp 1200w
            "
            sizes="(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px"
            type="image/webp"
          >
          <!-- JPEG fallback with responsive sizes -->
          <img
            src="images/photo1-800.jpg"
            srcset="
              images/photo1-400.jpg 400w,
              images/photo1-800.jpg 800w,
              images/photo1-1200.jpg 1200w
            "
            sizes="(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px"
            alt="Majestic mountain landscape at golden hour"
            width="1200"
            height="900"
          >
        </picture>
        <div class="gallery-caption">
          <h3>Mountain Sunrise</h3>
          <p>Golden hour over the peaks â€¢ No lazy loading (above fold)</p>
        </div>
      </div>

      <!-- Image 2: Above the fold - NO lazy loading -->
      <div class="gallery-item">
        <picture>
          <source
            srcset="
              images/photo2-400.avif 400w,
              images/photo2-800.avif 800w,
              images/photo2-1200.avif 1200w
            "
            sizes="(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px"
            type="image/avif"
          >
          <source
            srcset="
              images/photo2-400.webp 400w,
              images/photo2-800.webp 800w,
              images/photo2-1200.webp 1200w
            "
            sizes="(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px"
            type="image/webp"
          >
          <img
            src="images/photo2-800.jpg"
            srcset="
              images/photo2-400.jpg 400w,
              images/photo2-800.jpg 800w,
              images/photo2-1200.jpg 1200w
            "
            sizes="(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px"
            alt="Serene ocean waves at sunset"
            width="1200"
            height="900"
          >
        </picture>
        <div class="gallery-caption">
          <h3>Ocean Sunset</h3>
          <p>Peaceful waves at dusk â€¢ No lazy loading (above fold)</p>
        </div>
      </div>

      <!-- Image 3: Below the fold - WITH lazy loading -->
      <div class="gallery-item">
        <picture>
          <source
            srcset="
              images/photo3-400.avif 400w,
              images/photo3-800.avif 800w,
              images/photo3-1200.avif 1200w
            "
            sizes="(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px"
            type="image/avif"
          >
          <source
            srcset="
              images/photo3-400.webp 400w,
              images/photo3-800.webp 800w,
              images/photo3-1200.webp 1200w
            "
            sizes="(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px"
            type="image/webp"
          >
          <img
            src="images/photo3-800.jpg"
            srcset="
              images/photo3-400.jpg 400w,
              images/photo3-800.jpg 800w,
              images/photo3-1200.jpg 1200w
            "
            sizes="(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px"
            alt="Dense forest with morning mist"
            width="1200"
            height="900"
            loading="lazy"
          >
        </picture>
        <div class="gallery-caption">
          <h3>Misty Forest</h3>
          <p>Morning fog through the trees â€¢ Lazy loaded</p>
        </div>
      </div>

      <!-- Image 4: Below the fold - WITH lazy loading -->
      <div class="gallery-item">
        <picture>
          <source
            srcset="
              images/photo4-400.avif 400w,
              images/photo4-800.avif 800w,
              images/photo4-1200.avif 1200w
            "
            sizes="(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px"
            type="image/avif"
          >
          <source
            srcset="
              images/photo4-400.webp 400w,
              images/photo4-800.webp 800w,
              images/photo4-1200.webp 1200w
            "
            sizes="(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px"
            type="image/webp"
          >
          <img
            src="images/photo4-800.jpg"
            srcset="
              images/photo4-400.jpg 400w,
              images/photo4-800.jpg 800w,
              images/photo4-1200.jpg 1200w
            "
            sizes="(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px"
            alt="Northern lights over snowy landscape"
            width="1200"
            height="900"
            loading="lazy"
          >
        </picture>
        <div class="gallery-caption">
          <h3>Aurora Borealis</h3>
          <p>Northern lights magic â€¢ Lazy loaded</p>
        </div>
      </div>

      <!-- Image 5: Below the fold - WITH lazy loading -->
      <div class="gallery-item">
        <picture>
          <source
            srcset="
              images/photo5-400.avif 400w,
              images/photo5-800.avif 800w,
              images/photo5-1200.avif 1200w
            "
            sizes="(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px"
            type="image/avif"
          >
          <source
            srcset="
              images/photo5-400.webp 400w,
              images/photo5-800.webp 800w,
              images/photo5-1200.webp 1200w
            "
            sizes="(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px"
            type="image/webp"
          >
          <img
            src="images/photo5-800.jpg"
            srcset="
              images/photo5-400.jpg 400w,
              images/photo5-800.jpg 800w,
              images/photo5-1200.jpg 1200w
            "
            sizes="(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px"
            alt="Desert sand dunes at twilight"
            width="1200"
            height="900"
            loading="lazy"
          >
        </picture>
        <div class="gallery-caption">
          <h3>Desert Dunes</h3>
          <p>Sahara at twilight â€¢ Lazy loaded</p>
        </div>
      </div>

      <!-- Image 6: Below the fold - WITH lazy loading -->
      <div class="gallery-item">
        <picture>
          <source
            srcset="
              images/photo6-400.avif 400w,
              images/photo6-800.avif 800w,
              images/photo6-1200.avif 1200w
            "
            sizes="(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px"
            type="image/avif"
          >
          <source
            srcset="
              images/photo6-400.webp 400w,
              images/photo6-800.webp 800w,
              images/photo6-1200.webp 1200w
            "
            sizes="(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px"
            type="image/webp"
          >
          <img
            src="images/photo6-800.jpg"
            srcset="
              images/photo6-400.jpg 400w,
              images/photo6-800.jpg 800w,
              images/photo6-1200.jpg 1200w
            "
            sizes="(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px"
            alt="Tropical waterfall in lush jungle"
            width="1200"
            height="900"
            loading="lazy"
          >
        </picture>
        <div class="gallery-caption">
          <h3>Jungle Waterfall</h3>
          <p>Tropical paradise â€¢ Lazy loaded</p>
        </div>
      </div>

    </main>

    <footer>
      <h2>ðŸ“Š Performance Metrics</h2>
      <div class="stats">
        <div class="stat-card">
          <h3>Total Size</h3>
          <p class="stat-value">~196 KB</p>
          <p class="stat-detail">98% reduction</p>
        </div>
        <div class="stat-card">
          <h3>LCP</h3>
          <p class="stat-value">1.8s</p>
          <p class="stat-detail">58% faster</p>
        </div>
        <div class="stat-card">
          <h3>Lighthouse</h3>
          <p class="stat-value">95/100</p>
          <p class="stat-detail">+33 points</p>
        </div>
      </div>

      <div class="optimization-info">
        <h3>Optimization Techniques Used:</h3>
        <ul>
          <li>âœ… AVIF format (best compression)</li>
          <li>âœ… WebP fallback (wide support)</li>
          <li>âœ… JPEG fallback (universal)</li>
          <li>âœ… Responsive images (3 sizes: 400px, 800px, 1200px)</li>
          <li>âœ… Lazy loading (images 3-6)</li>
          <li>âœ… Width/height attributes (prevent CLS)</li>
          <li>âœ… Aspect-ratio CSS (reserve space)</li>
        </ul>
      </div>

      <p class="tip">
        ðŸ’¡ <strong>DevTools Tip:</strong> Open Network tab and check the "Type" column
        to see which format your browser loaded (should be AVIF in modern browsers).
      </p>

      <p class="tip" style="margin-top: 16px;">
        ðŸš€ <strong>Next Step:</strong> Run Lighthouse audit to verify the performance improvements!
      </p>
    </footer>
  </div>

  <!-- Performance monitoring (optional) -->
  <script>
    // Log Largest Contentful Paint
    new PerformanceObserver((list) => {
      const entries = list.getEntries();
      const lastEntry = entries[entries.length - 1];
      console.log('LCP:', lastEntry.renderTime || lastEntry.loadTime);
    }).observe({ entryTypes: ['largest-contentful-paint'] });

    // Log when images finish loading
    document.querySelectorAll('img').forEach((img, index) => {
      if (img.complete) {
        console.log(`Image ${index + 1} already loaded`);
      } else {
        img.addEventListener('load', () => {
          console.log(`Image ${index + 1} loaded:`, img.currentSrc);
        });
      }
    });
  </script>
</body>
</html>

